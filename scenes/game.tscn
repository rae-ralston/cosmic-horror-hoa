[gd_scene load_steps=40 format=3 uid="uid://bsneu6mo1x44l"]

[ext_resource type="Script" uid="uid://bhyrnlv1g4ay5" path="res://scripts/game.gd" id="1_uwrxv"]
[ext_resource type="Script" uid="uid://bc33ln64vga0w" path="res://scripts/inventory_hud.gd" id="2_0tnpc"]
[ext_resource type="PackedScene" uid="uid://dfxx88ir3r5eg" path="res://scenes/environment.tscn" id="2_yqjtg"]
[ext_resource type="Script" uid="uid://cil60usxpugy6" path="res://scripts/citations_manager.gd" id="3_lnu2h"]
[ext_resource type="Texture2D" uid="uid://biabks7tcdo6l" path="res://icon.svg" id="3_vtaks"]
[ext_resource type="Script" uid="uid://v7bdgn17mkfn" path="res://scenes/danger_overlay.gd" id="4_kvpfn"]
[ext_resource type="PackedScene" uid="uid://llv2q3dauk28" path="res://scenes/citation_list_ui.tscn" id="4_vtaks"]
[ext_resource type="Texture2D" uid="uid://byx30lok2xo3u" path="res://assets/sprites/evil_eye_sheet.png" id="5_dinhu"]
[ext_resource type="PackedScene" uid="uid://cwdx370arffpf" path="res://scenes/EndScreenUI.tscn" id="5_endui"]
[ext_resource type="PackedScene" uid="uid://j28d6tuyrgp6" path="res://scenes/timer_display.tscn" id="6_p57ef"]
[ext_resource type="PackedScene" uid="uid://mdsr1aaoki0k" path="res://scenes/player.tscn" id="6_player"]
[ext_resource type="PackedScene" uid="uid://dwnxilxpjb8yq" path="res://scenes/start_letter_ui.tscn" id="7_trtic"]
[ext_resource type="PackedScene" uid="uid://b2eqcsxi2or4p" path="res://scenes/citations_overlay.tscn" id="11_kvuet"]

[sub_resource type="AtlasTexture" id="AtlasTexture_kvuet"]
atlas = ExtResource("5_dinhu")
region = Rect2(0, 0, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_trtic"]
atlas = ExtResource("5_dinhu")
region = Rect2(512, 0, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_ir15t"]
atlas = ExtResource("5_dinhu")
region = Rect2(1024, 0, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_ca42v"]
atlas = ExtResource("5_dinhu")
region = Rect2(1536, 0, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_rysoc"]
atlas = ExtResource("5_dinhu")
region = Rect2(2048, 0, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_ssvqc"]
atlas = ExtResource("5_dinhu")
region = Rect2(2560, 0, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_264po"]
atlas = ExtResource("5_dinhu")
region = Rect2(3072, 0, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_1kice"]
atlas = ExtResource("5_dinhu")
region = Rect2(3584, 0, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_5newe"]
atlas = ExtResource("5_dinhu")
region = Rect2(0, 256, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_37s47"]
atlas = ExtResource("5_dinhu")
region = Rect2(512, 256, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_bt5mj"]
atlas = ExtResource("5_dinhu")
region = Rect2(1024, 256, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_e1j6l"]
atlas = ExtResource("5_dinhu")
region = Rect2(1536, 256, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_pl11u"]
atlas = ExtResource("5_dinhu")
region = Rect2(2048, 256, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_bhx41"]
atlas = ExtResource("5_dinhu")
region = Rect2(2560, 256, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_qnb83"]
atlas = ExtResource("5_dinhu")
region = Rect2(3072, 256, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_sww3w"]
atlas = ExtResource("5_dinhu")
region = Rect2(3584, 256, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_suyxu"]
atlas = ExtResource("5_dinhu")
region = Rect2(0, 512, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_sgl2t"]
atlas = ExtResource("5_dinhu")
region = Rect2(512, 512, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_qouja"]
atlas = ExtResource("5_dinhu")
region = Rect2(1024, 512, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_wljb1"]
atlas = ExtResource("5_dinhu")
region = Rect2(1536, 512, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_v2yb1"]
atlas = ExtResource("5_dinhu")
region = Rect2(2048, 512, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_js0lu"]
atlas = ExtResource("5_dinhu")
region = Rect2(2560, 512, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_gxtfn"]
atlas = ExtResource("5_dinhu")
region = Rect2(3072, 512, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_twgab"]
atlas = ExtResource("5_dinhu")
region = Rect2(3584, 512, 512, 256)

[sub_resource type="AtlasTexture" id="AtlasTexture_02fa5"]
atlas = ExtResource("5_dinhu")
region = Rect2(0, 768, 512, 256)

[sub_resource type="SpriteFrames" id="SpriteFrames_nepv3"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_kvuet")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_trtic")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ir15t")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ca42v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rysoc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ssvqc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_264po")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1kice")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5newe")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_37s47")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bt5mj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e1j6l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pl11u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bhx41")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qnb83")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sww3w")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_suyxu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sgl2t")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qouja")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wljb1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_v2yb1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_js0lu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gxtfn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_twgab")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_02fa5")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [],
"loop": true,
"name": &"new_animation",
"speed": 5.0
}]

[node name="game" type="Control"]
layout_mode = 3
anchors_preset = 0
script = ExtResource("1_uwrxv")

[node name="HUD" type="CanvasLayer" parent="."]
layer = 100

[node name="Inventory" type="Control" parent="HUD"]
layout_mode = 3
anchors_preset = 0
offset_left = 38.0
offset_top = 551.0
offset_right = 114.0
offset_bottom = 609.0
script = ExtResource("2_0tnpc")
player_path = NodePath("../../GameView/GameViewport/World/player")

[node name="HeldLabel" type="Label" parent="HUD/Inventory"]
layout_mode = 0
offset_left = 5.0
offset_top = 17.0
offset_right = 55.0
offset_bottom = 40.0
text = "Empty"

[node name="HeldIcon" type="TextureRect" parent="HUD/Inventory"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 0
offset_left = 5.0
offset_top = 42.0
offset_right = 29.0
offset_bottom = 66.0
texture = ExtResource("3_vtaks")
stretch_mode = 5

[node name="DayStatus" type="Control" parent="HUD"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="EndScreenUi" parent="HUD" instance=ExtResource("5_endui")]

[node name="DangerOverlay" type="Control" parent="HUD"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_kvpfn")

[node name="DangerColor" type="ColorRect" parent="HUD/DangerOverlay"]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(1, 0, 0, 1)

[node name="EvilAnchor" type="Control" parent="HUD/DangerOverlay"]
custom_minimum_size = Vector2(0, 100)
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
grow_horizontal = 2
mouse_filter = 2

[node name="EvilEye" type="AnimatedSprite2D" parent="HUD/DangerOverlay/EvilAnchor"]
texture_filter = 1
position = Vector2(561, 254)
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_nepv3")
frame_progress = 0.60641605

[node name="InteractPrompt" type="Label" parent="HUD"]
offset_left = 45.0
offset_top = 534.0
offset_right = 307.0
offset_bottom = 557.0
text = "Press E to pick up/put down items"

[node name="StartLetterUI" parent="HUD" instance=ExtResource("7_trtic")]

[node name="CitationsManager" type="Node" parent="."]
script = ExtResource("3_lnu2h")

[node name="CitationsOverlayCanvas" type="CanvasLayer" parent="CitationsManager"]

[node name="CitationListUI" parent="CitationsManager/CitationsOverlayCanvas" instance=ExtResource("4_vtaks")]

[node name="TimerDisplay" parent="CitationsManager/CitationsOverlayCanvas" instance=ExtResource("6_p57ef")]
anchors_preset = 1
anchor_left = 1.0
anchor_bottom = 0.0
grow_horizontal = 0
grow_vertical = 1

[node name="CitationsOverlay" parent="CitationsManager/CitationsOverlayCanvas" instance=ExtResource("11_kvuet")]
visible = false

[node name="GameView" type="SubViewportContainer" parent="."]
layout_mode = 0
offset_left = 16.0
offset_top = 1.0
offset_right = 1165.0
offset_bottom = 651.0
stretch = true

[node name="GameViewport" type="SubViewport" parent="GameView"]
handle_input_locally = false
size = Vector2i(1149, 650)
size_2d_override = Vector2i(320, 180)
size_2d_override_stretch = true
render_target_update_mode = 4

[node name="World" type="Node2D" parent="GameView/GameViewport"]

[node name="environment" parent="GameView/GameViewport/World" instance=ExtResource("2_yqjtg")]
position = Vector2(41.775455, 64.799995)

[node name="player" parent="GameView/GameViewport/World" instance=ExtResource("6_player")]
position = Vector2(148.44211, 83.907684)

[connection signal="citations_changed" from="CitationsManager" to="." method="_on_citations_manager_citations_changed"]
